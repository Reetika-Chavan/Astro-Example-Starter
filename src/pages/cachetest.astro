---
import Layout from "../layouts/Layout.astro";

const currentTime = new Date().toLocaleString();
const randomNumber = Math.floor(Math.random() * 1000);

Astro.response.headers.set("Cache-Control", "public, max-age=30, s-maxage=60");
Astro.response.headers.set("CDN-Cache-Control", "public, max-age=120");
Astro.response.headers.set("Vary", "Accept-Encoding");
---

<Layout>
  <section style="padding: 2rem; font-family: sans-serif;">
    <h1>🚀 Caching Test Page</h1>
    <p>This page is served with <strong>cache headers</strong>.</p>

    <div style="background: #f0f8ff; padding: 1rem; border-radius: 8px; margin: 1rem 0;">
      <h2>Server Data:</h2>
      <ul>
        <li><strong>Current server time:</strong> {currentTime}</li>
        <li><strong>Random number:</strong> {randomNumber}</li>
      </ul>
    </div>
    <p><a href="/">← Back to Home</a></p>
  </section>
</Layout>
